<controls:SettingsPageBase x:Class="ClassIsland.Views.SettingPages.ConnectionSettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:ClassIsland.Views.SettingPages"
      xmlns:controls="clr-namespace:ClassIsland.Core.Abstractions.Controls;assembly=ClassIsland.Core"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      xmlns:ci="clr-namespace:ClassIsland"
      xmlns:controls1="clr-namespace:ClassIsland.Core.Controls;assembly=ClassIsland.Core"
      xmlns:models="clr-namespace:ClassIsland.Models"
      xmlns:commands="http://classisland.tech/schemas/xaml/core"
      xmlns:controls2="clr-namespace:ClassIsland.Controls"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="连接"
      TextElement.Foreground="{DynamicResource MaterialDesignBody}"
      Background="{DynamicResource MaterialDesignPaper}"
      FontFamily="{StaticResource HarmonyOsSans}"
      TextElement.FontWeight="Regular"
      TextElement.FontSize="14"
      TextOptions.TextFormattingMode="Ideal"
      TextOptions.TextRenderingMode="Auto"
      d:DataContext="{d:DesignInstance local:PluginsSettingsPage}">
    <ScrollViewer>
        <Grid>
            <controls1:SettingsCard IconGlyph="LinkVariant"
                                   Header="启用连接"
                                   Description="允许连接到此 ClassIsland 实例" 
                                   Margin="10,72,10,0" 
                                   VerticalAlignment="Top" 
                                   Height="66">
                <controls1:SettingsCard.Switcher>
                    <ToggleButton IsChecked="{Binding SettingsService.Settings.IsConnectionEnabled, Mode=TwoWay}"/>
                </controls1:SettingsCard.Switcher>
            </controls1:SettingsCard>
            <TabControl HorizontalAlignment="Center" Height="297" Margin="0,143,0,0" VerticalAlignment="Top" Width="780">
                <TabItem Header="连接概览">
                    <StackPanel Style="{StaticResource SettingsPageStackPanelStyle}" Margin="0" Tag="CanPolicyDisable">
                        <TextBlock Margin="8 8 0 4" TextWrapping="Wrap">
                            <Run>连接状态：</Run><!--<Run Text="{Binding }" />-->
                        </TextBlock>
                        <TextBlock Margin="8 8 0 4" TextWrapping="Wrap">
                            <Run>连接IP地址：</Run><!--<Run Text="{Binding }" />-->
                        </TextBlock>
                        <TextBlock Margin="8 8 0 4" TextWrapping="Wrap">
                            <Run>连接端口：</Run><!--<Run Text="{Binding }" />-->
                        </TextBlock>
                        <TextBlock Margin="8 8 0 4" TextWrapping="Wrap">
                            <Run>CUID：</Run><Run Text="{Binding ManagementService.Persist.ClientUniqueId,RelativeSource={RelativeSource FindAncestor, AncestorType=local:ConnectionSettingsPage}}"/>
                        </TextBlock>
                    </StackPanel>
                </TabItem>
                <TabItem Header="连接设置">
                    <StackPanel Style="{StaticResource SettingsPageStackPanelStyle}" Margin="0" Tag="CanPolicyDisable">
                        
                    </StackPanel>
                </TabItem>
            </TabControl>
            <Label Content="连接" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Height="57" Width="155" FontSize="20"/>
            <Border Background="{DynamicResource MaterialDesignPaper}"
                    Visibility="{Binding SettingsService.Settings.IsConnectionWarningVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                <ScrollViewer>
                    <StackPanel VerticalAlignment="Center"
                    HorizontalAlignment="Center">
                        <Grid HorizontalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="75" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="75" />
                            </Grid.ColumnDefinitions>
                            <Image Grid.Column="0" Source="/Assets/AppLogo.png" />
                            <materialDesign:PackIcon Grid.Column="1"
                                         VerticalAlignment="Center"
                                         Width="25" Height="25"
                                         Margin="16 0"
                                         Kind="Plus" />
                            <materialDesign:PackIcon Grid.Column="2" Kind="LinkVariant"
                                         VerticalAlignment="Stretch"
                                         HorizontalAlignment="Stretch"
                                         Height="75"
                                         Width="75" />
                        </Grid>
                        <TextBlock Text="连接"
                       HorizontalAlignment="Center"
                       TextAlignment="Center"
                       Margin="0 8 0 0"
                       Style="{StaticResource MaterialDesignHeadline5TextBlock}" />
                        <TextBlock Margin="0 6 0 0"
                       TextAlignment="Center"
                       HorizontalAlignment="Center"
                       TextWrapping="Wrap"
                       Width="320">
                <Run Text="欢迎使用连接！连接可以远程修改 ClassIsland 的配置，比如修改档案，或者修改设置文件，等等。" />

                        </TextBlock>
                        <Border Width="320"
                    Background="#22FF8800"
                    Margin="0 8 0 0"
                    Padding="8">
                            <StackPanel>
                                <materialDesign:PackIcon Kind="Warning"
                                             Margin="0 0 0 4"
                                             HorizontalAlignment="Center"/>
                                <TextBlock TextAlignment="Center"
                               HorizontalAlignment="Center"
                               TextWrapping="Wrap"
                               Text="需要注意，连接可以远程操作ClassIsland的档案和设置，并且在连接时您不可以进行任何操作。" />
                            </StackPanel>
                        </Border>

                        <Button HorizontalAlignment="Center"
                    Margin="0 16 0 0"
                    Click="ButtonAgreeConnectionNotice_OnClick">
                            <commands:IconText Kind="Check" Text="同意并开始使用连接"></commands:IconText>
                        </Button>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </ScrollViewer>
</controls:SettingsPageBase>
